<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R package to predict ethnicity from names â€¢ rethnicity</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An R package to predict ethnicity from names">
<meta property="og:description" content="This package provides a function to predict ethnicity from names of people.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rethnicity</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction.html">Introduction to `rethnicity` package</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fangzhou-xie/rethnicity/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="rethnicity" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rethnicity" class="anchor"></a>rethnicity</h1></div>
<!-- badges: start -->
<!-- # ```{r, echo = FALSE, results = "asis"} -->
<!-- # cat( -->
<!-- #   badge_cran_release("rethnicity", "green"), -->
<!-- #   badge_cran_download("rethnicity", "grand-total", "green"), -->
<!-- #   badge_cran_checks("rethnicity"), -->
<!-- #   badge_last_commit("fangzhou-xie/rethnicity") -->
<!-- # ) -->
<!-- # ``` -->

<p>The goal of rethnicity is to provide a method to predict ethnicity from names of people.</p>
<div id="warning" class="section level2">
<h2 class="hasAnchor">
<a href="#warning" class="anchor"></a>WARNING!</h2>
<p>I created this package hoping to help applied researchers on their studies regarding ethnic bias and discrimination, and potentially eliminate the racial and ethnic disparities. By using this package, you agree to the following:</p>
<ol>
<li>You <strong>will NOT</strong> use this package for purposes other than academic research.</li>
<li>You <strong>will NOT</strong> disclose the predicted ethnic group to the public, given the names data you might have.</li>
<li>You <strong>will NOT</strong> discriminate anyone on the basis of race and color, by using the methods provided by this package. <!-- 4. You **agree** to advocate racial equality. -->
</li>
</ol>
<p>Again, you should use the package responsibly.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<!-- You can install the released version of rethnicity from [CRAN](https://CRAN.R-project.org) with: -->
<!-- ``` r -->
<!-- install.packages("rethnicity") -->
<!-- ``` -->
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"fangzhou-xie/rethnicity"</span><span class="op">)</span></code></pre></div>
</div>
<div id="getting-to-use-the-package-in-5-minutes" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-to-use-the-package-in-5-minutes" class="anchor"></a>Getting to use the package in 5 minutes</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fangzhou-xie/rethnicity">rethnicity</a></span><span class="op">)</span>
<span class="co">#&gt; The method provided by this package has its limitations and anyone must use them cautiously and responsibly.</span>
<span class="co">#&gt; You should also agree that you only intend to use the method for academic research purpose and not for commercial use.</span>
<span class="co">#&gt; You would also agree NOT to discriminate anyone based on race or color or any characteristic, with the information provided by this package.</span></code></pre></div>
<div id="i-want-to-predict-ethnicity-from-last-names" class="section level3">
<h3 class="hasAnchor">
<a href="#i-want-to-predict-ethnicity-from-last-names" class="anchor"></a>I want to predict ethnicity from last names!</h3>
<p>Sure. I have trained a model to predict and classify race based on last names. Simply use it as:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/predict_ethnicity.html">predict_ethnicity</a></span><span class="op">(</span>lastnames <span class="op">=</span> <span class="st">"Freeman"</span>, method <span class="op">=</span> <span class="st">"lastname"</span><span class="op">)</span>
<span class="co">#&gt;   lastname prob_asian prob_black prob_hispanic prob_white  race</span>
<span class="co">#&gt; 1  Freeman 0.08037726  0.4495561    0.04879313  0.4212735 black</span></code></pre></div>
</div>
<div id="what-if-i-have-both-first-names-and-last-names" class="section level3">
<h3 class="hasAnchor">
<a href="#what-if-i-have-both-first-names-and-last-names" class="anchor"></a>What if I have both first names and last names?</h3>
<p>Of course. There is a separate model just to do that. By having both first names and last names, we can achieve higher accuracy than only having last names. The syntax is similar to what we have seen from above.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/predict_ethnicity.html">predict_ethnicity</a></span><span class="op">(</span>firstnames <span class="op">=</span> <span class="st">"Morgan"</span>, lastnames <span class="op">=</span> <span class="st">"Freeman"</span>, method <span class="op">=</span> <span class="st">"fullname"</span><span class="op">)</span>
<span class="co">#&gt;   firstname lastname prob_asian prob_black prob_hispanic prob_white  race</span>
<span class="co">#&gt; 1    Morgan  Freeman 0.06973174  0.5086463    0.02247369  0.3991482 black</span></code></pre></div>
</div>
<div id="what-if-i-have-multiple-names" class="section level3">
<h3 class="hasAnchor">
<a href="#what-if-i-have-multiple-names" class="anchor"></a>What if I have multiple names?</h3>
<p>Cool. I got you covered. Just use vectors as input.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">firstnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Morgan"</span>, <span class="st">"Will"</span><span class="op">)</span>
<span class="va">lastnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Freeman"</span>, <span class="st">"Smith"</span><span class="op">)</span>
<span class="fu"><a href="reference/predict_ethnicity.html">predict_ethnicity</a></span><span class="op">(</span>lastnames <span class="op">=</span> <span class="va">lastnames</span>, method <span class="op">=</span> <span class="st">"lastname"</span><span class="op">)</span>
<span class="co">#&gt;   lastname prob_asian prob_black prob_hispanic prob_white  race</span>
<span class="co">#&gt; 1  Freeman 0.08037726  0.4495561    0.04879313  0.4212735 black</span>
<span class="co">#&gt; 2    Smith 0.06350436  0.6307345    0.02846091  0.2773002 black</span>
<span class="fu"><a href="reference/predict_ethnicity.html">predict_ethnicity</a></span><span class="op">(</span>firstnames <span class="op">=</span> <span class="va">firstnames</span>, lastnames <span class="op">=</span> <span class="va">lastnames</span>, method <span class="op">=</span> <span class="st">"fullname"</span><span class="op">)</span>
<span class="co">#&gt;   firstname lastname prob_asian prob_black prob_hispanic prob_white  race</span>
<span class="co">#&gt; 1    Morgan  Freeman 0.06973174  0.5086463   0.022473686 0.39914824 black</span>
<span class="co">#&gt; 2      Will    Smith 0.01116799  0.8902173   0.008021907 0.09059285 black</span></code></pre></div>
<p>Just remember to have the same length for the <code>firstnames</code> and <code>lastnames</code> vectors and the first name and last name for the same person should have same index in each of the vectors.</p>
</div>
<div id="wait-i-want-to-predict-a-million-names" class="section level3">
<h3 class="hasAnchor">
<a href="#wait-i-want-to-predict-a-million-names" class="anchor"></a>Wait. I want to predict a million names!</h3>
<p>Alright. The package also supports extremely fast execution by multi-threading via the wonderful <code>RcppThread</code> package. To use this, just pass a number to the <code>threads</code> argument and the number need to be greater than 0.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lastnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"Freeman"</span>, <span class="fl">1000000</span><span class="op">)</span>
<span class="co"># measure the elapsed time</span>
<span class="va">start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/predict_ethnicity.html">predict_ethnicity</a></span><span class="op">(</span>lastnames <span class="op">=</span> <span class="va">lastnames</span>, method <span class="op">=</span> <span class="st">"lastname"</span>, threads <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>
<span class="va">end_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">end_time</span> <span class="op">-</span> <span class="va">start_time</span>
<span class="co">#&gt; Time difference of 9.897331 secs</span></code></pre></div>
<p>For most use cases that I can imagine, the default setting (<code>threads = 0</code>) should be fast enough since we are leveraging C++ routines for the processing. If you have very large dataset, or if you have a powerful machine, or if you just want to run the code faster, you can set the <code>threads</code> argument to be bigger than 0 and you should observe performance boost.</p>
<p>Note that I have 24-thread desktop and hence choosing 20 threads to work on this. You may need to wisely choose the appropriate number of threads for the job. In general, the more threads you have, the faster it should run. But the relationship is not linear, as there will be more overhead when increasing the number of threads.</p>
<!-- ```{r} -->
<!-- lastnames <- rep("Freeman", 1000000) -->
<!-- # measure the elapsed time -->
<!-- start_time <- Sys.time() -->
<!-- p <- predict_ethnicity(lastnames = lastnames, method = "lastname", threads = 10) -->
<!-- end_time <- Sys.time() -->
<!-- end_time - start_time -->
<!-- ``` -->
<p>Processing a million names only spent around 10 seconds for us. I would call this pretty fast.</p>
</div>
</div>
</div>
<div id="license" class="section level1">
<h1 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h1>
<p>MIT License</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/fangzhou-xie/rethnicity/">https://â€‹github.com/â€‹fangzhou-xie/â€‹rethnicity/â€‹</a>
</li>
<li>Report a bug at <br><a href="https://github.com/fangzhou-xie/rethnicity/issues">https://â€‹github.com/â€‹fangzhou-xie/â€‹rethnicity/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Fangzhou Xie <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7702-093X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=rethnicity"><img src="http://www.r-pkg.org/badges/version/rethnicity" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=rethnicity"><img src="http://cranlogs.r-pkg.org/badges/grand-total/rethnicity" alt="CRAN_Downloads"></a></li>
<li><a href="https://app.travis-ci.com/github/fangzhou-xie/rethnicity"><img src="https://app.travis-ci.com/fangzhou-xie/rethnicity.svg?branch=main" alt="Build Status"></a></li>
<li><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Fangzhou Xie.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
